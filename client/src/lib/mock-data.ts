export interface Patient {
  id: string;
  firstName: string;
  lastName: string;
  phone: string;
  email?: string;
  lastVisit: string;
  summary: string;
  avatar?: string;
}

export interface Consultation {
  id: string;
  patientId?: string;
  patientName?: string;
  date: string;
  duration: string;
  status: 'processing' | 'ready' | 'error' | 'recording';
  summary: string;
  complaints: string;
  objective: string;
  plan: string;
  comments: string;
  transcript: string;
  audioUrl?: string;
}

/**
 * Централизованные мок-данные приложения.
 * При появлении реального API достаточно заменить эти структуры
 * на вызовы бэкенда или загрузку из локального стора.
 */
export const MOCK_PATIENTS: Patient[] = [
  {
    id: "1",
    firstName: "Елена",
    lastName: "Волкова",
    phone: "+7 (999) 123-45-67",
    lastVisit: "2023-10-25T14:30:00",
    summary: "Лечение кариеса 46 зуба. Рекомендована гигиена.",
    avatar: "ЕВ",
    email: "volkova.elena@clinic.com",
  },
  {
    id: "2",
    firstName: "Александр",
    lastName: "Петров",
    phone: "+7 (999) 987-65-43",
    lastVisit: "2023-11-12T10:00:00",
    summary: "Консультация по имплантации. Анализ КТ.",
    avatar: "АП",
    email: "a.petrov@clinic.com",
  },
  {
    id: "3",
    firstName: "Мария",
    lastName: "Соколова",
    phone: "+7 (999) 555-01-23",
    lastVisit: "2023-11-20T16:45:00",
    summary: "Плановый осмотр. Проблем не выявлено.",
    avatar: "МС",
    email: "m.sokolova@clinic.com",
  },
  {
    id: "4",
    firstName: "Дмитрий",
    lastName: "Иванов",
    phone: "+7 (999) 111-22-33",
    lastVisit: "2023-10-05T09:15:00",
    summary: "Лечение пульпита. Зуб 24.",
    avatar: "ДИ",
    email: "d.ivanov@clinic.com",
  },
  {
    id: "5",
    firstName: "Светлана",
    lastName: "Никифорова",
    phone: "+7 (999) 222-44-55",
    lastVisit: "2023-09-18T11:20:00",
    summary: "Профессиональная гигиена и отбеливание.",
    avatar: "СН",
    email: "svetlana@healthy-smile.ru",
  },
];

export const MOCK_CONSULTATIONS: Consultation[] = [
  {
    id: "c1",
    patientId: "1",
    patientName: "Елена Волкова",
    date: "2023-10-25T14:30:00",
    duration: "45:12",
    status: "ready",
    summary: "Пациентка жаловалась на реакцию на холодное в нижней правой челюсти. При осмотре выявлен глубокий кариес 46 зуба. Проведена анестезия, препарирование и пломбирование композитом. Прикус скорректирован.",
    complaints: "Острая боль при употреблении холодной воды, длится несколько секунд. Локализуется в нижнем правом заднем зубе.",
    objective: "Зуб 46: Глубокая кариозная полость на окклюзионной поверхности. Перкуссия отрицательная. Термопроба положительная (гиперчувствительность). Подвижности нет.",
    plan: "1. Инфильтрационная анестезия (Артикаин 4%).\n2. Удаление кариозных тканей.\n3. Реставрация светоотверждаемым композитом.\n4. Полировка.\n5. Рекомендация: Не есть твердую пищу 2 часа.",
    comments: "Пациентка тревожная, но перенесла хорошо. Проверить контакты на следующем визите.",
    transcript: "Врач: Здравствуйте, Елена, как самочувствие сегодня? \nПациент: Здравствуйте, доктор, у меня острая боль, когда пью холодную воду. \nВрач: Покажите, где именно. \nПациент: Вот здесь, внизу справа. \nВрач: Хорошо, давайте посмотрим. Откройте шире, пожалуйста. \n... [Транскрипция продолжается] ... \nВрач: Похоже на глубокий кариес 46 зуба. Нужно лечить сегодня, чтобы не дошло до пульпита. \nПациент: Больно будет? \nВрач: Совсем нет, сделаем хорошую анестезию."
  },
  {
    id: "c2",
    patientId: "2",
    patientName: "Александр Петров",
    date: "2023-11-12T10:00:00",
    duration: "30:00",
    status: "ready",
    summary: "Консультация по поводу отсутствующего зуба 36. Обсуждение вариантов: имплантация vs мост.",
    complaints: "Отсутствует зуб снизу слева. Трудно жевать.",
    objective: "Отсутствует зуб 36. Ширина кости при пальпации кажется достаточной. Соседние зубы 35 и 37 интактны.",
    plan: "1. Направление на КЛКТ.\n2. Следующий визит: Планирование лечения по 3D-снимку.\n3. Предоставлена предварительная смета.",
    comments: "Пациент предпочитает имплант, а не мост.",
    transcript: "Врач: Доброе утро, Александр. Что привело вас? \nПациент: Я потерял этот зуб год назад и хочу его восстановить. \nВрач: Так, 36-й. Думали об имплантации? \nПациент: Да, но переживаю насчет операции."
  },
  {
    id: "c3",
    patientId: undefined, // No patient assigned
    patientName: undefined,
    date: "2023-11-27T08:30:00",
    duration: "05:23",
    status: "processing",
    summary: "Обработка...",
    complaints: "Обработка...",
    objective: "Обработка...",
    plan: "Обработка...",
    comments: "Обработка...",
    transcript: "Обработка..."
  },
  {
    id: "c4",
    patientId: "4",
    patientName: "Дмитрий Иванов",
    date: "2023-09-30T09:00:00",
    duration: "38:45",
    status: "ready",
    summary: "Пациент жаловался на ночные боли верхнего премоляра. Проведено лечение пульпита 24 зуба с постановкой временной пломбы.",
    complaints: "Ноющие боли вечером и ночью, усиливающиеся при накусывании.",
    objective: "Зуб 24: глубокий кариес, положительная реакция на перкуссию, отек слизистой отсутствует.",
    plan: "1. Проводниковая анестезия.\n2. Раскрытие полости зуба и удаление пульпы.\n3. Прохождение и пломбирование каналов.\n4. Временная пломба. Контроль через 7 дней.",
    comments: "Напоминание: проверить ответ на антибактериальную терапию.",
    transcript: "Врач: Дмитрий, я вижу воспаление нерва. Нужно пролечить каналы...\nПациент: Давайте попробуем.",
  },
  {
    id: "c5",
    patientId: "5",
    patientName: "Светлана Никифорова",
    date: "2023-09-18T11:20:00",
    duration: "25:17",
    status: "ready",
    summary: "Комплексная чистка ультразвуком и AirFlow, рекомендации по домашнему уходу.",
    complaints: "Пожелтевшая эмаль, чувствительность при сладком.",
    objective: "Значительные мягкие отложения, кровоточивость десен при зондировании.",
    plan: "1. Снятие зубного камня ультразвуком.\n2. Полировка пастой.\n3. Рекомендована щетка soft и паста для чувствительных зубов.",
    comments: "Планируется домашнее отбеливание при повторном визите.",
    transcript: "Врач: Светлана, начинаем с ультразвуковой чистки...\nПациент: Хорошо.",
  },
];

export const MOCK_DB = {
  patients: MOCK_PATIENTS,
  consultations: MOCK_CONSULTATIONS,
};

export function getPatientById(id?: string | null) {
  if (!id) return undefined;
  return MOCK_PATIENTS.find((patient) => patient.id === id);
}

export function getConsultationsByPatient(patientId?: string | null) {
  if (!patientId) return [];
  return MOCK_CONSULTATIONS.filter(
    (consultation) => consultation.patientId === patientId,
  );
}
